# data = [{ "results": [ { "alternatives": [ { "timestamps": [ [ "what's", 0.68, 1.02 ] ], "transcript": "what's " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "Watson", 0.68, 1.12 ], [ "use", 1.12, 1.38 ] ], "transcript": "Watson use " } ], "final": False } ], "result_index": 0 },  { "results": [ { "alternatives": [ { "timestamps": [ [ "Watson", 0.68, 1.12 ], [ "you", 1.12, 1.25 ], [ "suck", 1.25, 1.71 ] ], "transcript": "Watson you suck " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "word_confidence": [ [ "Watson", 0.5380276441574097 ], [ "you", 0.7119483351707458 ], [ "suck", 0.23405686020851135 ] ], "confidence": 0.424224853515625, "transcript": "Watson you suck ", "timestamps": [ [ "Watson", 0.68, 1.12 ], [ "you", 1.12, 1.25 ], [ "suck", 1.25, 1.71 ] ] }, { "transcript": "Watson you saw " }, { "transcript": "what's in you suck " } ], "final": True } ], "result_index": 0 }]

# data = [{ "results": [ { "alternatives": [ { "timestamps": [ [ "hello", 0.7, 1.02 ] ], "transcript": "hello " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "hello", 0.7, 1.34 ] ], "transcript": "hello " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "word_confidence": [ [ "hello", 0.7947678565979004 ] ], "confidence": 0.7947678565979004, "transcript": "hello ", "timestamps": [ [ "hello", 0.7, 1.34 ] ] }, { "transcript": "how low " } ], "final": True } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "mine", 2.46, 2.87 ] ], "transcript": "mine " } ], "final": False } ], "result_index": 1 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "my", 2.46, 2.87 ], [ "name", 2.87, 3.25 ] ], "transcript": "my name " } ], "final": False } ], "result_index": 1 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "my", 2.46, 2.87 ], [ "name", 2.87, 3.58 ] ], "transcript": "my name " } ], "final": False } ], "result_index": 1 }, { "results": [ { "alternatives": [ { "word_confidence": [ [ "my", 0.7550464272499084 ], [ "name", 0.968951940536499 ] ], "confidence": 0.8906472325325012, "transcript": "my name ", "timestamps": [ [ "my", 2.46, 2.87 ], [ "name", 2.87, 3.58 ] ] }, { "transcript": "mine name " } ], "final": True } ], "result_index": 1 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "it", 4.58, 4.73 ] ], "transcript": "it " } ], "final": False } ], "result_index": 2 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "is", 4.58, 5.08 ] ], "transcript": "is " } ], "final": False } ], "result_index": 2 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "is", 4.58, 5.27 ] ], "transcript": "is " } ], "final": False } ], "result_index": 2 }, { "results": [ { "alternatives": [ { "word_confidence": [ [ "is", 0.9247750043869019 ] ], "confidence": 0.9247750043869019, "transcript": "is ", "timestamps": [ [ "is", 4.58, 5.27 ] ] }, { "transcript": "it is " } ], "final": True } ], "result_index": 2 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "Raymond", 6.13, 6.59 ] ], "transcript": "Raymond " } ], "final": False } ], "result_index": 3 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "Rayment", 6.13, 6.74 ] ], "transcript": "Rayment " } ], "final": False } ], "result_index": 3 }, { "results": [ { "alternatives": [ { "word_confidence": [ [ "Rayment", 0.1738104522228241 ] ], "confidence": 0.1738104522228241, "transcript": "Rayment ", "timestamps": [ [ "Rayment", 6.13, 6.74 ] ] }, { "transcript": "ramen " }, { "transcript": "raiment " } ], "final": True } ], "result_index": 3 }]


data = { "results": [ { "alternatives": [ { "timestamps": [ [ "I", 0.53, 0.65 ] ], "transcript": "I " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "are", 0.51, 1.01 ] ], "transcript": "are " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.36 ] ], "transcript": "%HESITATION " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ] ], "transcript": "%HESITATION " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.1 ] ], "transcript": "%HESITATION so " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.48 ] ], "transcript": "%HESITATION so " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.61 ], [ "I", 2.64, 2.87 ] ], "transcript": "%HESITATION so I " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.61 ], [ "I", 2.64, 2.88 ], [ "don\'t", 2.88, 3.16 ], [ "know", 3.16, 3.25 ] ], "transcript": "%HESITATION so I don\'t know " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.61 ], [ "I", 2.64, 2.88 ], [ "don\'t", 2.88, 3.2 ] ], "transcript": "%HESITATION so I don\'t " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.61 ], [ "I", 2.64, 2.88 ], [ "don\'t", 2.88, 3.2 ], [ "%HESITATION", 3.63, 3.99 ] ], "transcript": "%HESITATION so I don\'t %HESITATION " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.61 ], [ "I", 2.64, 2.88 ], [ "don\'t", 2.88, 3.2 ], [ "%HESITATION", 3.63, 4.26 ] ], "transcript": "%HESITATION so I don\'t %HESITATION " } ], "final": False } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "word_confidence": [ [ "%HESITATION", 1 ], [ "so", 1 ], [ "I", 1 ], [ "don\'t", 0.9293899536132812 ], [ "%HESITATION", 0.9958372116088867 ] ], "confidence": 0.9917352795600891, "transcript": "%HESITATION so I don\'t %HESITATION ", "timestamps": [ [ "%HESITATION", 0.54, 1.44 ], [ "so", 1.65, 2.61 ], [ "I", 2.64, 2.88 ], [ "don\'t", 2.88, 3.2 ], [ "%HESITATION", 3.63, 4.26 ] ] }, { "transcript": "%HESITATION so I don\'t know %HESITATION " }, { "transcript": "%HESITATION so I don\'t have %HESITATION " } ], "final": True } ], "result_index": 0 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "I", 4.86, 5.11 ] ], "transcript": "I " } ], "final": False } ], "result_index": 1 }, { "results": [ { "alternatives": [ { "timestamps": [ [ "are", 4.86, 5.47 ] ], "transcript": "are " } ], "final": False } ], "result_index": 1 }

data = filter(lambda x: x['results'][0]['final'], data)
pauses = []
for i in range(len(data) - 1):
    best, best2 = data[i], data[i + 1]
    timestamps, timestamps2 = best['results'][0]['alternatives'][0]['timestamps'], best2['results'][0]['alternatives'][0]['timestamps']
    # print timestamps, timestamps2
    pauses.append((timestamps[-1][0], timestamps2[0][0], timestamps2[0][1] - timestamps[-1][2]))

# print pauses
words = [res['results'][0]['alternatives'][0]['transcript'] for res in data]
# print words

sentence = ''.join(words)
# print sentence

confidences = []
hesitations = []
for guess in data:
    confidence = guess['results'][0]['alternatives'][0]['word_confidence']
    for item in confidence:
        # print item
        if '%HESITATION' in item:
            print 'hes', item
            hesitations.append(item)
        else:
            print 'conf', item
            confidences.append(item)

print 'confidences' , confidences
print 'hesitations', hesitations

time = data[-1]['results'][0]['alternatives'][0]['timestamps'][-1][-1]

wpm = len(sentence.split()) / (time / 60)

# print wpm